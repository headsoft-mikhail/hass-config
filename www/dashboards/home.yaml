views:
  - title: Сеть
    path: network
    icon: mdi:web
    badges: []
    cards:
      - type: grid
        title: Интернет
        columns: 1
        square: false
        cards:
          - type: grid
            square: false
            cards:
              - type: markdown
                content: |-
                  <div style="display: flex; justify-content: center;">
                    <a href="http://192.168.1.1/dashboard">
                      <img src="/local/images/icon_keenetic.svg" width="150" height="100">
                    </a>
                  </div>
              - type: markdown
                content: |-
                  <div style="text-align: center;">
                    <a href="http://192.168.1.1:8090/transmission/web/index.html?devicetype=computer">
                      <img src="/local/images/icon_transmission.svg" width="150" height="100">
                    </a>
                  </div>
              - type: markdown
                content: |-
                  <div style="text-align: center;">
                    <a href="https://github.com/headsoft-mikhail/hass-config">
                      <img src="/local/images/icon_github.svg" width="150" height="100">
                    </a>
                  </div>
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: binary_sensor.ping_8_8_8_8
                icon_color: |-
                  {% if is_state(entity, 'on') %}
                    green
                  {% elif is_state(entity, 'off') %}
                    red
                  {% else %}
                    orange
                  {% endif %}
                content: |-
                  {% if is_state(entity, 'on') %}
                    Подключено
                  {% elif is_state(entity, 'off') %}
                    Отключено
                  {% else %}
                    Недоступно
                  {% endif %}
                icon: |-
                  {% if is_state(entity, 'on') %}
                    mdi:check-network-outline
                  {% elif is_state(entity, 'off') %}
                    mdi:close-network-outline
                  {% else %}
                    mdi:help-circle-outline
                  {% endif %}
                tap_action:
                  action: more-info
              - type: spacer
              - type: entity
                entity: sensor.zyxel_gateway_download_speed
                icon: mdi:download
                icon_color: blue
              - type: entity
                entity: sensor.zyxel_gateway_upload_speed
                icon: mdi:upload
                icon_color: blue
          - type: custom:uptime-card
            entity: binary_sensor.ping_8_8_8_8
            icon: mdi:check-network-outline
            ko_icon: mdi:close-network-outline
            none_icon: mdi:wifi-strength-off-outline
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            bar:
              height: 20
              round: 3
              spacing: 1
              amount: 96
            show:
              status: false
              icon: false
              title: false
            duration:
              quantity: 24
              unit: hour
          - type: grid
            square: false
            columns: 1
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                cards:
                  - type: grid
                    square: false
                    columns: 2
                    cards:
                      - type: gauge
                        entity: sensor.speedtest_download
                        min: 0
                        max: 100
                      - type: gauge
                        entity: sensor.speedtest_upload
                        min: 0
                        max: 100
                  - type: custom:mushroom-entity-card
                    entity: input_button.run_speedtest
                    name: ' '
                    icon: mdi:play-speed
                    primary_info: name
                    secondary_info: last-changed
                    tap_action:
                      action: none
                    double_tap_action:
                      action: none
                    hold_action:
                      action: toggle
                    fill_container: true
                    layout: vertical
                layout:
                  grid-template-columns: auto 25%
                  margin: 0px
      - type: grid
        columns: 1
        square: false
        title: Transmission
        cards:
          - type: custom:transmission-card
            header_text: ''
            no_torrent_label: ''
            hide_header: false
            hide_status: false
            hide_turtle: true
            hide_startstop: false
            hide_type: true
            hide_delete_torrent: false
            hide_delete_torrent_full: false
            default_type: total
            display_mode: compact
            default_sort: name
            hide_sort: true
            default_order: decending
            hide_order: true
            sensor_entity_id: transmission
            hide_add_torrent: true
            hide_upload_speed: false
            hide_download_speed: false
            force_status_newline: true
      - type: grid
        title: Home Assistant
        columns: 1
        square: false
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.home_assistant_operating_system_version
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon: mdi:home
                icon_color: light-blue
              - type: template
                content: '{{ states(entity) }}'
                icon_color: |-
                  {% if states(entity) == 'backed_up' %}
                    light-blue
                  {% else %}
                    red
                  {% endif %}
                icon: |-
                  {% if states(entity) == 'backed_up' %}
                    mdi:cloud-upload
                  {% else %}
                    mdi:cloud-alert
                  {% endif %}
                entity: sensor.backup_state
                tap_action:
                  action: more-info
                hold_action:
                  action: none
              - type: template
                content: >-
                  {{ as_datetime(state_attr(entity,
                  'last_backup')).strftime('%d.%m.%Y') }}
                icon_color: light-blue
                icon: mdi:cloud-clock
                entity: sensor.backup_state
                tap_action:
                  action: more-info
                hold_action:
                  action: none
              - type: template
                content: >-

                  {{ state_attr(entity, 'backups')[-1]['size'] }} / {{
                  state_attr(entity, 'size_in_google_drive') }} / {{
                  state_attr(entity, 'free_space_in_google_drive') }}
                icon_color: teal
                icon: mdi:cloud-braces
                entity: sensor.backup_state
                picture: ''
                tap_action:
                  action: more-info
                hold_action:
                  action: none
              - type: entity
                entity: sensor.rpi_cpu_temperature
                icon_color: orange
              - type: template
                tap_action:
                  action: more-info
                hold_action:
                  action: toggle
                content: |-
                  {% set action = state_attr(entity, 'hvac_action') %}
                  {{ {
                    'off': 'Выключено',
                    'idle': 'Ожидание',
                    'cooling': 'Охлаждение',
                  }[action] if action else 'Неизвестно' }}
                entity: climate.rpi_cooling_system
                icon: |+
                  {% set action = state_attr(entity,  'hvac_action') %}
                  {{ {
                    'off': 'mdi:fan-off',
                    'idle': 'mdi:fan-clock',
                    'cooling': 'mdi:fan',
                  }[action] if action else 'mdi:help-circle-outline' }}

                icon_color: |
                  {% set action = state_attr(entity,  'hvac_action') %}
                  {{ {
                    'off': 'grey',
                    'idle': 'cyan',
                    'cooling': 'cyan',
                  }[action] if action else 'orange' }}
          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:mushroom-bar-card
                entity: sensor.home_assistant_host_disk_used
                min: 0
                max: 234
                enable_color_severity: true
                name: Использование ROM
              - type: custom:mushroom-bar-card
                entity: sensor.sql_query_db_volume
                min: 0
                max: 2500
                enable_color_severity: true
              - type: grid
                columns: 1
                square: false
                cards:
                  - type: custom:mushroom-bar-card
                    entity: sensor.total_cpu_usage
                    icon: mdi:cpu-64-bit
                    enable_color_severity: true
                    name: Использование CPU
                  - type: custom:apexcharts-card
                    chart_type: donut
                    apex_config:
                      dataLabels:
                        enabled: false
                      legend:
                        show: false
                    all_series_config:
                      fill_raw: zero
                      group_by:
                        duration: 1min
                    update_interval: 1min
                    series:
                      - entity: sensor.home_assistant_core_cpu_percent
                        name: HA Core
                      - entity: sensor.home_assistant_supervisor_cpu_percent
                        name: HA Supervisor
                      - entity: sensor.mariadb_cpu_percent
                        name: MariaDB
                      - entity: sensor.zigbee2mqtt_cpu_percent
                        name: Zigbee2MQTT
                      - entity: sensor.mosquitto_broker_cpu_percent
                        name: Mosquitto
                      - entity: sensor.home_assistant_google_drive_backup_cpu_percent
                        name: Backup
                      - entity: sensor.studio_code_server_cpu_percent
                        name: Studio Code
                      - entity: sensor.advanced_ssh_web_terminal_cpu_percent
                        name: SSH Terminal
                      - entity: sensor.silicon_labs_flasher_cpu_percent
                        name: Flasher
                      - entity: sensor.adguard_home_cpu_percent
                        name: AdGuard
              - type: grid
                columns: 1
                square: false
                cards:
                  - type: custom:mushroom-bar-card
                    entity: sensor.total_ram_usage
                    name: Использование RAM
                    icon: mdi:memory
                    enable_color_severity: true
                  - type: custom:apexcharts-card
                    chart_type: donut
                    apex_config:
                      dataLabels:
                        enabled: false
                      legend:
                        show: false
                    all_series_config:
                      fill_raw: zero
                      group_by:
                        duration: 1min
                    update_interval: 1min
                    series:
                      - entity: sensor.home_assistant_core_memory_percent
                        name: HA Core
                      - entity: sensor.home_assistant_supervisor_memory_percent
                        name: HA Supervisor
                      - entity: sensor.mariadb_memory_percent
                        name: MariaDB
                      - entity: sensor.zigbee2mqtt_memory_percent
                        name: Zigbee2MQTT
                      - entity: sensor.mosquitto_broker_memory_percent
                        name: Mosquitto
                      - entity: >-
                          sensor.home_assistant_google_drive_backup_memory_percent
                        name: Backup
                      - entity: sensor.studio_code_server_memory_percent
                        name: Studio Code
                      - entity: sensor.advanced_ssh_web_terminal_memory_percent
                        name: SSH Terminal
                      - entity: sensor.silicon_labs_flasher_memory_percent
                        name: Flasher
                      - entity: sensor.adguard_home_memory_percent
                        name: AdGuard
  - title: Микроклимат
    path: climate
    icon: mdi:home-thermometer-outline
    badges: []
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: weather
            entity: weather.home_assistant
            show_conditions: true
            show_temperature: true
          - type: template
            entity: sensor.home_assistant_apparent_temperature
            content: >-
              Ощущается как {{ states(entity).replace('.', ',') }} {{
              state_attr(entity, 'unit_of_measurement') }}
            icon: mdi:thermometer
            icon_color: |-
              {% set temp = states(entity) | float(0) %}
              {% if temp < 3 %}
                light-blue
              {% elif temp < 13 %}
                teal
              {% elif temp < 23 %}
                amber
              {% else %}
                deep-orange
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.home_assistant_precipitation
            icon: mdi:weather-snowy-rainy
            content: >-
              {{ states(entity) | float | round(1) ~ ' mm' if states(entity) not
              in ['unknown', 'unavailable', 'none', '', None] else '-' }}
            tap_action:
              action: more-info
            icon_color: light-blue
          - type: entity
            entity: sensor.home_assistant_cloud_coverage
            icon_color: light-grey
            tap_action:
              action: more-info
          - type: entity
            entity: sensor.home_assistant_wind_bearing_2
            icon_color: cyan
            tap_action:
              action: more-info
          - type: entity
            entity: sensor.home_assistant_wind_speed
            icon_color: cyan
            tap_action:
              action: more-info
          - type: entity
            entity: sensor.home_assistant_humidity
            icon_color: blue
            tap_action:
              action: more-info
          - type: entity
            entity: sensor.home_assistant_pressure
            content_info: state
            icon_color: grey
            tap_action:
              action: more-info
      - type: custom:hourly-weather
        entity: weather.home_assistant
        icons: true
        show_wind: 'false'
        show_date: 'false'
        show_precipitation_amounts: true
        show_precipitation_probability: false
        label_spacing: '2'
        name: ' '
        num_segments: '8'
      - type: custom:clock-weather-card
        entity: weather.home_assistant
        hide_today_section: true
        forecast_rows: 7
        weather_icon_type: fill
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            name: Температура
            hour24: true
            points_per_hour: 2
            font_size: 70
            entities:
              - entity: sensor.home_assistant_temperature
                name: Температура
                show_indicator: true
                show_state: true
              - entity: sensor.home_assistant_apparent_temperature
                name: Ощущается
                show_indicator: true
                show_state: true
              - color: white
                entity: sun.sun
                name: Солнце
                show_line: false
                show_points: false
                show_legend: false
                y_axis: secondary
            state_map:
              - value: below_horizon
                label: Night
              - value: above_horizon
                label: Day
            tap_action: none
      - type: custom:windrose-card
        data_period:
          hours_to_show: 720
          time_interval: 60
        refresh_interval: 300
        windspeed_bar_location: bottom
        wind_direction_entity:
          entity: sensor.home_assistant_wind_bearing
          use_statistics: false
          direction_compensation: 0
        windspeed_entities:
          - entity: sensor.home_assistant_wind_speed
            name: Скорость ветра
            speed_unit: mps
            use_statistics: true
            statistics_period: hour
            windspeed_bar_full: false
            output_speed_unit: mps
            speed_range_beaufort: false
            speed_range_step: 1
            speed_range_max: 15
            current_speed_arrow: true
        direction_labels:
          cardinal_direction_letters: СВЮЗ
        wind_direction_count: 8
        windrose_draw_north_offset: 0
        current_direction:
          show_arrow: true
          arrow_size: 50
          center_circle_size: 30
          hide_direction_below_speed: 0
        compass_direction:
          auto_rotate: false
          entity: ''
        cardinal_direction_letters: С,В,Ю,З
        matching_strategy: time-frame
        center_calm_percentage: false
        corner_info:
          top_right:
            entity: sensor.home_assistant_wind_speed
            unit: ' м/с'
            color: white
        actions:
          windrose:
            tap_action:
              entity: sensor.home_assistant_wind_bearing
              action: more-info
          speed_bar_1:
            tap_action:
              entity: sensor.home_assistant_wind_speed
              action: more-info
      - type: custom:horizon-card
        title: null
        moon: true
        refresh_period: 60
        fields:
          sunrise: true
          sunset: true
          dawn: true
          noon: true
          dusk: true
          sun_azimuth: true
          moon_azimuth: true
          sun_elevation: true
          moon_elevation: true
          moonrise: true
          moonset: true
          moon_phase: true
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            name: Температура
            hour24: true
            points_per_hour: 1
            font_size: 70
            tap_action: none
            entities:
              - entity: sensor.airmonitor2_temperature
                name: Спальня
                show_indicator: true
                show_state: true
              - entity: sensor.aqara_t1_sensor_3_temperature
                name: Кухня
                show_indicator: true
                show_state: true
              - entity: sensor.aqara_t1_sensor_2_temperature
                name: Балкон
                show_indicator: true
                show_state: true
              - entity: sensor.aqara_t1_sensor_1_temperature
                name: Коридор
                show_indicator: true
                show_state: true
          - type: custom:mini-graph-card
            name: Влажность
            hour24: true
            points_per_hour: 1
            font_size: 70
            tap_action: none
            entities:
              - entity: sensor.airmonitor2_humidity
                name: Спальня
                show_indicator: true
                show_state: true
              - entity: sensor.aqara_t1_sensor_3_humidity
                name: Кухня
                show_indicator: true
                show_state: true
              - entity: sensor.aqara_t1_sensor_2_humidity
                name: Балкон
                show_indicator: true
                show_state: true
              - entity: sensor.aqara_t1_sensor_1_humidity
                name: Коридор
                show_indicator: true
                show_state: true
                show_legend: true
  - title: Устройства
    path: device-control
    icon: mdi:apps
    badges: []
    cards:
      - square: false
        type: grid
        columns: 1
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                name: Температура
                entity: sensor.airmonitor2_temperature
                icon_color: deep-orange
              - type: entity
                name: Влажность
                entity: sensor.airmonitor2_humidity
                icon_color: blue
              - type: template
                entity: sensor.airmonitor2_pm25
                icon_color: |-
                  {% set tvoc = states(entity) | float(0) %}
                  {% if tvoc < 75 %}
                    green
                  {% elif tvoc < 150 %}
                    lime
                  {% elif tvoc < 250 %}
                    deep-orange
                  {% else %}
                    red
                  {% endif %}
                icon: mdi:grain
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: more-info
              - type: template
                entity: sensor.airmonitor2_tvoc_ug
                icon: mdi:molecule
                icon_color: |-
                  {% set tvoc = states(entity) | float(0) %}
                  {% if tvoc < 300 %}
                    teal
                  {% elif tvoc < 1000 %}
                    green
                  {% elif tvoc < 3000 %}
                    lime
                  {% elif tvoc < 9000 %}
                    deep-orange
                  {% else %}
                    red
                  {% endif %}
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: more-info
              - type: template
                entity: sensor.airmonitor2_co2
                icon: mdi:molecule-co2
                icon_color: |-
                  {% set tvoc = states(entity) | float(0) %}
                  {% if tvoc < 1000 %}
                    green
                  {% elif tvoc < 2000 %}
                    amber
                  {% else %}
                    red
                  {% endif %}
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: more-info
              - type: entity
                name: Давление
                entity: sensor.airmonitor2_noise
                icon_color: grey
        title: Спальня
      - square: false
        type: grid
        columns: 1
        title: Кухня
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                name: Температура
                entity: sensor.efekta_smart_aq_box_temperature
                icon_color: deep-orange
              - type: entity
                name: Влажность
                entity: sensor.efekta_smart_aq_box_humidity
                icon_color: blue
              - type: template
                entity: sensor.efekta_smart_aq_box_pm25
                icon_color: |-
                  {% set tvoc = states(entity) | float(0) %}
                  {% if tvoc < 75 %}
                    green
                  {% elif tvoc < 150 %}
                    lime
                  {% elif tvoc < 250 %}
                    deep-orange
                  {% else %}
                    red
                  {% endif %}
                icon: mdi:grain
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: more-info
              - type: template
                entity: sensor.efekta_smart_aq_box_tvoc_ug
                icon: mdi:molecule
                icon_color: |-
                  {% set tvoc = states(entity) | float(0) %}
                  {% if tvoc < 300 %}
                    teal
                  {% elif tvoc < 1000 %}
                    green
                  {% elif tvoc < 3000 %}
                    lime
                  {% elif tvoc < 9000 %}
                    deep-orange
                  {% else %}
                    red
                  {% endif %}
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: more-info
              - type: template
                entity: sensor.efekta_smart_aq_box_co2
                icon: mdi:molecule-co2
                icon_color: |-
                  {% set tvoc = states(entity) | float(0) %}
                  {% if tvoc < 1000 %}
                    green
                  {% elif tvoc < 2000 %}
                    amber
                  {% else %}
                    red
                  {% endif %}
                content: >-
                  {{ states(entity) }} {{ state_attr(entity,
                  'unit_of_measurement') }}
                tap_action:
                  action: more-info
              - type: entity
                name: Давление
                entity: sensor.efekta_smart_aq_box_pressure
                icon: mdi:gauge
                icon_color: grey
      - type: grid
        columns: 1
        square: false
        title: Медиа
        cards:
          - type: custom:mushroom-media-player-card
            entity: media_player.yandex_station_m101k3a00pba6r
            icon: ''
            fill_container: false
            use_media_info: true
            show_volume_level: true
            volume_controls:
              - volume_buttons
            media_controls:
              - play_pause_stop
              - next
            icon_type: entity-picture
            name: Mini Red
          - features:
              - type: custom:service-call
                entries:
                  - type: selector
                    entity_id: input_select.sound_signal_source
                    options:
                      - entity_id: input_select.sound_signal_source
                        option: 'Off'
                        tap_action:
                          action: perform-action
                          perform_action: input_select.select_option
                          data:
                            option: 'Off'
                          target:
                            entity_id: input_select.sound_signal_source
                        label: 'Off'
                        icon: mdi:power-off
                        styles: |
                          :host {
                            --mdc-icon-size: 25px;
                            --color: grey;
                            {% if (states(config.entity) or "") != config.option %}
                            --icon-color: grey;
                            --label-color: grey;
                            {% endif %}
                          }
                      - entity_id: input_select.sound_signal_source
                        option: Optical
                        tap_action:
                          action: perform-action
                          perform_action: input_select.select_option
                          data:
                            option: Optical
                          target:
                            entity_id: input_select.sound_signal_source
                        label: Optical
                        icon: mdi:toslink
                        styles: |
                          :host {
                            --mdc-icon-size: 25px;
                            --color: orange;
                            {% if (states(config.entity) or "") != config.option %}
                            --icon-color: orange;
                            --label-color: orange;
                            {% endif %}
                          }
                      - entity_id: input_select.sound_signal_source
                        option: Bluetooth
                        tap_action:
                          action: perform-action
                          perform_action: input_select.select_option
                          data:
                            option: Bluetooth
                          target:
                            entity_id: input_select.sound_signal_source
                        label: BT
                        icon: mdi:bluetooth-audio
                        styles: |
                          :host {
                            --mdc-icon-size: 25px;
                            --color: cyan;
                            {% if (states(config.entity) or "") != config.option %}
                            --icon-color: cyan;
                            --label-color: cyan;
                            {% endif %}
                          }
                      - entity_id: input_select.sound_signal_source
                        option: Line 1
                        tap_action:
                          action: perform-action
                          perform_action: input_select.select_option
                          data:
                            option: Line 1
                          target:
                            entity_id: input_select.sound_signal_source
                        label: Line 1
                        icon: mdi:numeric-1-box
                        styles: |
                          :host {
                            --mdc-icon-size: 25px;
                            --color: green;
                            {% if (states(config.entity) or "") != config.option %}
                            --icon-color: green;
                            --label-color: green;
                            {% endif %}
                          }
                      - entity_id: input_select.sound_signal_source
                        option: Line 2
                        tap_action:
                          action: perform-action
                          perform_action: input_select.select_option
                          data:
                            option: Line 2
                          target:
                            entity_id: input_select.sound_signal_source
                        label: Line 2
                        icon: mdi:numeric-2-box
                        styles: |
                          :host {
                            --mdc-icon-size: 25px;
                            --color: green;
                            {% if (states(config.entity) or "") != config.option %}
                            --icon-color: green;
                            --label-color: green;
                            {% endif %}
                          }
                      - entity_id: input_select.sound_signal_source
                        option: Coax
                        tap_action:
                          action: perform-action
                          perform_action: input_select.select_option
                          data:
                            option: Coax
                          target:
                            entity_id: input_select.sound_signal_source
                        label: Coax
                        icon: mdi:audio-input-stereo-minijack
                        styles: |
                          :host {
                            --mdc-icon-size: 25px;
                            --color: magenta;
                            {% if (states(config.entity) or "") != config.option %}
                            --icon-color: magenta;
                            --label-color: magenta;
                            {% endif %}
                          }
                    autofill_entity_id: true
            type: tile
            entity: input_select.sound_signal_source
            features_position: bottom
            vertical: false
            hide_state: true
      - type: grid
        title: Ahtom
        square: false
        columns: 2
        cards:
          - type: tile
            entity: switch.ahtom_switch_1_table_light
          - type: tile
            entity: switch.ahtom_switch_2_tv_backlight
          - type: tile
            entity: switch.ahtom_switch_3_kitchen_led
          - type: tile
            entity: switch.aqara_t2_ch1_pc
      - type: grid
        square: false
        columns: 1
        title: Tuya
        cards:
          - features:
              - type: custom:service-call
                entries:
                  - type: selector
                    options:
                      - label: 'Off'
                        tap_action:
                          action: perform-action
                          perform_action: light.turn_on
                          target:
                            entity_id:
                              - light.tuya_lava_lamp
                          data:
                            brightness: 0
                        styles: |
                          :host {
                            {% if state_attr("light.tuya_lava_lamp", "brightness") == None %}
                            background: grey;
                            {% else %}
                            --color: grey;
                            --label-color: grey;
                            {% endif %}
                          }
                        entity_id: light.tuya_lava_lamp
                      - option: 102
                        label: Relax
                        tap_action:
                          action: perform-action
                          perform_action: light.turn_on
                          target:
                            entity_id:
                              - light.tuya_lava_lamp
                          data:
                            brightness: 102
                        styles: |
                          :host {
                            {% if  
                              state_attr("light.tuya_lava_lamp", "brightness") <= config.option + 10 
                              and 
                              state_attr("light.tuya_lava_lamp", "brightness") >= config.option - 10
                            %}
                            background: orange;
                            {% else %}
                            --color: orange;
                            --label-color: orange;
                            {% endif %}
                          }
                        entity_id: light.tuya_lava_lamp
                      - option: 255
                        label: Heat
                        tap_action:
                          action: perform-action
                          perform_action: light.turn_on
                          target:
                            entity_id:
                              - light.tuya_lava_lamp
                          data:
                            brightness: 255
                        styles: |
                          :host {
                            {% if state_attr("light.tuya_lava_lamp", "brightness") >= config.option - 10 %}
                            background: red;
                            {% else %}
                            --color: red;
                            --label-color: red;
                            {% endif %}
                          }
                        entity_id: light.tuya_lava_lamp
                    entity_id: light.tuya_lava_lamp
            type: tile
            entity: light.tuya_lava_lamp
            features_position: inline
            vertical: false
            show_entity_picture: false
            hide_state: false
            icon_tap_action:
              action: toggle
          - square: false
            type: grid
            columns: 2
            cards:
              - type: custom:mushroom-climate-card
                entity: climate.towel_dryer
                show_temperature_control: true
                collapsible_controls: false
                fill_container: true
                layout: vertical
                hvac_modes:
                  - heat
                  - 'off'
      - type: grid
        columns: 2
        square: false
        title: Meross
        cards:
          - type: tile
            entity: light.meross_ambient_light_1
            features_position: bottom
            vertical: false
          - type: tile
            entity: light.meross_ambient_light_2
          - type: tile
            entity: switch.meross_power_outlet_1
            features_position: bottom
            vertical: false
          - type: custom:mushroom-entity-card
            entity: binary_sensor.meross_power_outlet_1_activity
            icon_color: red
            icon_type: icon
      - type: grid
        square: false
        columns: 2
        title: Климат
        cards:
          - type: custom:mushroom-climate-card
            entity: climate.aqara_e1_thermostat_1
            layout: vertical
            fill_container: true
            show_temperature_control: true
            hvac_modes:
              - heat
              - 'off'
          - type: custom:mushroom-climate-card
            entity: climate.aqara_e1_thermostat_2
            layout: vertical
            fill_container: true
            hvac_modes:
              - heat
              - 'off'
          - type: custom:mushroom-climate-card
            entity: climate.aqara_e1_thermostat_3
            fill_container: true
            layout: vertical
            hvac_modes:
              - heat
              - 'off'
          - type: custom:mushroom-humidifier-card
            entity: humidifier.switch_humidifier
            fill_container: false
            layout: vertical
            show_target_humidity_control: true
            collapsible_controls: false
            primary_info: name
            secondary_info: state
      - square: false
        type: grid
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.aqara_tilt_sensor_vibration
            name: Вибрация
          - type: custom:mushroom-entity-card
            entity: binary_sensor.motion_sensor_occupancy
            name: Занятость
        columns: 2
        title: Z2M
  - title: Энергия
    path: energy
    icon: mdi:battery-80
    badges: []
    cards:
      - type: grid
        title: Электричество
        square: false
        columns: 1
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: binary_sensor.aqara_t1_220v_sensor
                icon_color: |-
                  {% if is_state(entity, 'on') %}
                    green
                  {% elif is_state(entity, 'off') %}
                    red
                  {% else %}
                    orange
                  {% endif %}
                content: |-
                  {% if is_state(entity, 'on') %}
                    Подключено
                  {% elif is_state(entity, 'off') %}
                    Отключено
                  {% else %}
                    Недоступно
                  {% endif %}
                icon: |-
                  {% if is_state(entity, 'on') %}
                    mdi:power-plug-outline
                  {% elif is_state(entity, 'off') %}
                    mdi:power-plug-off-outline
                  {% else %}
                    mdi:help-circle-outline
                  {% endif %}
                tap_action:
                  action: more-info
          - type: custom:uptime-card
            entity: binary_sensor.aqara_t1_220v_sensor
            average_template: '[[[ return variables.uptime.toFixed(2); ]]]% uptime'
            bar:
              height: 20
              round: 3
              spacing: 1
              amount: 96
            show:
              status: false
              icon: false
              title: false
            duration:
              quantity: 24
              unit: hour
          - type: custom:mini-graph-card
            entities:
              - entity: sensor.meross_power_outlet_1_energy
            name: Обогрев балкона
            icon: mdi:radiator
            hours_to_show: 168
            lower_bound: 0
            group: true
            hour24: true
            group_by: date
            aggregate_func: max
            show:
              graph: bar
      - type: grid
        title: Батареи
        columns: 1
        square: false
        cards:
          - type: custom:auto-entities
            card:
              type: custom:layout-card
              layout_type: grid
              layout:
                grid-template-columns: repeat(2, minmax(50%, 50%))
            filter:
              include:
                - domain: sensor
                  attributes:
                    device_class: battery
                  state: < 75
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
                    tap_action:
                      action: more-info
                - domain: sensor
                  attributes:
                    device_class: battery
                  state: unknown
                  options:
                    type: custom:mushroom-entity-card
                - domain: sensor
                  attributes:
                    device_class: battery
                  state: unavailable
                  options:
                    type: custom:mushroom-entity-card
                - entity_id: sensor.*_battery_status
                  state: < 75
                  options:
                    type: custom:mushroom-entity-card
                    tap_action:
                      action: more-info
                - entity_id: sensor.*_battery_status
                  state: unknown
                  options:
                    type: custom:mushroom-entity-card
                - entity_id: sensor.*_battery_status
                  state: unavailable
                  options:
                    type: custom:mushroom-entity-card
              exclude:
                - entity_id: sensor.contact_sensor_battery_sensor
                - entity_id: sensor.ik_pult_battery
            sort:
              method: state
              numeric: true
            show_empty: true
  - title: Питомцы
    path: pets
    icon: mdi:cat
    badges: []
    cards:
      - square: false
        type: grid
        columns: 1
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: auto 30%
              margin: 0px
            cards:
              - type: custom:mushroom-bar-card
                entity: sensor.fresh_element_solo_1_dispensed
                name: Выдано еды
                min: 0
                max: 50
                tap_action:
                  action: none
              - type: custom:mushroom-entity-card
                entity: input_button.petkit_feeder_1_act
                icon: mdi:hamburger-plus
                name: Кормить
                tap_action:
                  action: none
                hold_action:
                  action: toggle
                double_tap_action:
                  action: none
                secondary_info: last-changed
                fill_container: true
                layout: vertical
          - type: custom:auto-entities
            card:
              type: custom:layout-card
              layout_type: grid
              layout:
                grid-template-columns: repeat(2, minmax(50%, 50%))
                margin: 0px
            entities: null
            filter:
              include:
                - entity_id: binary_sensor.fresh_element_solo_1_food_level
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
                - entity_id: sensor.fresh_element_solo_1_error
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
                - entity_id: sensor.fresh_element_solo_1_status
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
              exclude:
                - entity_id: binary_sensor.fresh_element_solo_1_food_level
                  state: 'off'
                - entity_id: sensor.fresh_element_solo_1_error
                  state: no_error
                - entity_id: sensor.fresh_element_solo_1_status
                  state: online
        title: Кормилка 1
      - square: false
        type: grid
        columns: 1
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: auto 30%
              margin: 0px
            cards:
              - type: custom:mushroom-bar-card
                entity: sensor.fresh_element_solo_2_dispensed
                name: Выдано еды
                min: 0
                max: 50
                tap_action:
                  action: none
              - type: custom:mushroom-entity-card
                entity: input_button.petkit_feeder_1_act
                icon: mdi:hamburger-plus
                name: Кормить
                tap_action:
                  action: none
                hold_action:
                  action: toggle
                double_tap_action:
                  action: none
                secondary_info: last-changed
                fill_container: true
                layout: vertical
          - type: custom:auto-entities
            card:
              type: custom:layout-card
              layout_type: grid
              layout:
                grid-template-columns: repeat(2, minmax(50%, 50%))
              margin: 0px
            entities: null
            filter:
              include:
                - entity_id: binary_sensor.fresh_element_solo_2_food_level
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
                - entity_id: sensor.fresh_element_solo_2_error
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
                - entity_id: sensor.fresh_element_solo_2_status
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
              exclude:
                - entity_id: binary_sensor.fresh_element_solo_2_food_level
                  state: 'off'
                - entity_id: sensor.fresh_element_solo_2_error
                  state: no_error
                - entity_id: sensor.fresh_element_solo_2_status
                  state: online
        title: Кормилка 2
      - type: grid
        title: Питьевой фонтан
        square: false
        columns: 1
        cards:
          - type: tile
            entity: switch.eversweet_3_pro_uvc_power
            name: Подача воды
            icon: mdi:water-pump
            features_position: bottom
            vertical: false
            color: blue
          - type: custom:auto-entities
            card:
              type: custom:layout-card
              layout_type: grid
              layout:
                grid-template-columns: repeat(2, minmax(50%, 50%))
            entities: null
            filter:
              include:
                - entity_id: binary_sensor.eversweet_3_pro_uvc_water_level
                  options:
                    type: custom:mushroom-entity-card
                    icon_color: red
                  state: 'on'
            show_empty: false
      - square: false
        type: grid
        columns: 1
        title: Расходники
        cards:
          - type: custom:mushroom-bar-card
            entity: sensor.eversweet_3_pro_uvc_filter
            name: 'Питьевой фонтан: Фильтр'
            min: 0
            max: 100
            enable_color_severity: true
            severity_direction: reverse
            layout: horizontal
            hold_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.eversweet_3_pro_uvc_reset_filter
            tap_action:
              action: none
            double_tap_action:
              action: none
          - type: custom:mushroom-bar-card
            entity: sensor.fresh_element_solo_1_desiccant_days_remaining
            name: 'Кормилка 1: Влагопоглотитель'
            icon: mdi:water-remove
            min: 0
            max: 30
            enable_color_severity: true
            severity_direction: reverse
            layout: horizontal
            hold_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.fresh_element_solo_1_reset_desiccant
            tap_action:
              action: none
            double_tap_action:
              action: none
          - type: custom:mushroom-bar-card
            entity: sensor.fresh_element_solo_2_desiccant_days_remaining
            name: 'Кормилка 2: Влагопоглотитель'
            icon: mdi:water-remove
            min: 0
            max: 30
            severity_direction: reverse
            enable_color_severity: true
            layout: horizontal
            tap_action:
              action: none
            hold_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.fresh_element_solo_2_reset_desiccant
            double_tap_action:
              action: none
          - type: custom:mushroom-bar-card
            entity: sensor.petkit_pura_air_filter_days_left
            name: 'Освежитель лотка: Фильтр'
            icon: mdi:air-filter
            min: 0
            max: 90
            enable_color_severity: true
            severity_direction: reverse
            layout: horizontal
            hold_action:
              action: perform-action
              perform_action: script.reset_petkit_pura_air_filter
              target: {}
            double_tap_action:
              action: none
